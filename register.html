<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Register — Lost & Found</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="auth-card">
    <h2>Create an account</h2>
    <input id="regFullname" placeholder="Full name" />
    <input id="regLocation" placeholder="Location" />
    <input id="regPhone" placeholder="Contact number" />
    <input id="regEmail" type="email" placeholder="Email" />
    <input id="regPassword" type="password" placeholder="Password" />
    <label class="small">Upload ID (photo) — optional</label>
    <input id="regIdFile" type="file" accept="image/*" />
    <div class="row">
      <button id="btnCreate">Create account</button>
      <a class="small right" href="index.html">Back to Login</a>
    </div>
    <p id="regStatus" class="small"></p>
    <p class="small">After creating an account, click <b>Request Activation</b> inside your account to notify admin. Your account won't have dashboard access until admin approves it.</p>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>

  <script src="firebase-config.js"></script>
  <script src="scripts/app.js"></script>

  <script>
    document.getElementById('btnCreate').addEventListener('click', async () => {
      const fullname = document.getElementById('regFullname').value.trim();
      const location = document.getElementById('regLocation').value.trim();
      const phone = document.getElementById('regPhone').value.trim();
      const email = document.getElementById('regEmail').value.trim();
      const password = document.getElementById('regPassword').value;
      const idFile = document.getElementById('regIdFile').files[0];

      try {
        await registerAndCreateUser({ fullname, location, phone, email, password, idFile });
        document.getElementById('regStatus').innerText = 'Account created. Please log in and click "Request Activation".';
      } catch (e) {
        document.getElementById('regStatus').innerText = e.message;
      }
    });
  </script>
</body>
</html>
