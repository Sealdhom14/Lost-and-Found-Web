<!DOCTYPE html>
<html>
<head>
  <title>Register</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<div class="card" style="max-width:600px;margin:20px auto;">
  <h2>Create Account</h2>

  <input id="fullname" placeholder="Full Name" />
  <input id="location" placeholder="Location" />
  <input id="phone" placeholder="Phone Number" />
  <input id="email" type="email" placeholder="Email" />
  <input id="password" type="password" placeholder="Password" />
  <label>Upload ID:</label>
  <input type="file" id="idfile" accept="image/*" />
  <br>
  <button id="registerBtn">Register</button>
  <p><a href="index.html">Back to Main</a></p>
</div>

<!-- Firebase SDKs + config -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
<script src="firebase-config.js"></script>

<!-- Small registration script that calls the shared app logic
     But to keep this page self-contained we link to app.js below -->
<script src="app.js"></script>

<script>
document.getElementById('registerBtn').addEventListener('click', async function(){
  // The registration logic is in app.js as registerUser()
  try {
    await registerUserFromRegisterPage();
  } catch (e) {
    alert('Registration error: ' + e.message);
  }
});
</script>

  <script>
function register() {
    const email = document.getElementById("email").value;
    const pass = document.getElementById("password").value;

    auth.createUserWithEmailAndPassword(email, pass)
    .then((userCred) => {
        const uid = userCred.user.uid;

        return db.collection("users").doc(uid).set({
            email: email,
            role: "pending",
            status: "waiting_for_approval"
        });
    })
    .then(() => {
        alert("Registered! Wait for admin activation.");
        window.location.href = "index.html";
    })
    .catch(err => alert(err.message));
}
</script>


</body>
</html>

